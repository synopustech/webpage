<!doctype html>
<html lang="en" data-bs-theme="auto">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Support Engineer Flashcards ‚Äî One Page</title>
    <meta name="description" content="Bootstrap flashcards app for Unix, SQL, Git, Tomcat, API, and DataHub decks in a single page, with explanations and usage tips.">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üÉè</text></svg>">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.9.0/styles/github.min.css">
    <style>
      :root { --flip-duration: 420ms; }
      .flashcard .flip-container { perspective: 1000px; min-height: 320px; }
      .flashcard .flipper { position: relative; transition: transform var(--flip-duration); transform-style: preserve-3d; min-height: 280px; }
      .flashcard .flipper.flipped { transform: rotateY(180deg); }
      .flashcard .front, .flashcard .back { backface-visibility: hidden; -webkit-backface-visibility: hidden; position: absolute; inset: 0; overflow: auto; }
      .flashcard .back { transform: rotateY(180deg); }
      .answer-content pre { background: var(--bs-tertiary-bg); padding: .75rem; border-radius: .5rem; border: 1px solid var(--bs-border-color); }
      .answer-content code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
      .list-group-numbered .list-group-item { cursor: pointer; }
      .badge { vertical-align: middle; }
      .explain-callout { font-size: .9rem; }
      .offcanvas-header .btn-close { filter: none; }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary border-bottom sticky-top">
      <div class="container-fluid">
        <a class="navbar-brand fw-semibold" href="#">Support Engineer Flashcards</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navContent">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div id="navContent" class="collapse navbar-collapse">
          <div class="d-flex flex-wrap gap-2 ms-auto align-items-center">
            <div class="input-group">
              <span class="input-group-text">Deck</span>
              <select id="deckSelect" class="form-select"></select>
            </div>
            <div class="input-group">
              <span class="input-group-text">Search</span>
              <input id="searchInput" class="form-control" placeholder="keyword, command, SQL ...">
              <button id="clearSearchBtn" class="btn btn-outline-secondary" title="Clear search">‚úï</button>
            </div>
            <div class="form-check form-switch ms-2" title="Dark mode">
              <input class="form-check-input" type="checkbox" id="darkModeToggle">
              <label class="form-check-label" for="darkModeToggle">Dark</label>
            </div>
            <button class="btn btn-outline-info ms-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#helpCanvas" aria-controls="helpCanvas" title="Help & Explanations">
              Help & Explanations
            </button>
          </div>
        </div>
      </div>
    </nav>

    <main class="container my-4">
      <div class="row g-4">
        <div class="col-lg-8">
          <div class="card flashcard shadow-sm">
            <div class="card-header d-flex justify-content-between align-items-center">
              <div>
                <span class="badge text-bg-primary" id="badgeDeck">Deck</span>
                <span class="badge text-bg-info" id="badgeIndex">1 / 1</span>
              </div>
              <div class="d-flex flex-wrap gap-2">
                <button id="shuffleBtn" class="btn btn-sm btn-outline-secondary" title="Shuffle deck">Shuffle</button>
                <button id="resetProgressBtn" class="btn btn-sm btn-outline-danger" title="Reset known/unknown">Reset Progress</button>
              </div>
            </div>
            <div class="card-body">
              <div class="flip-container" id="flipContainer">
                <div class="flipper" id="flipper">
                  <div class="front p-3">
                    <h5 class="text-secondary mb-3">Question</h5>
                    <div id="question" class="fs-5"></div>
                    <div class="mt-3 small text-muted">Tip: press Space to reveal, ‚Üê ‚Üí to navigate</div>
                  </div>
                  <div class="back p-3">
                    <h5 class="text-success mb-3">Answer</h5>
                    <div id="answer" class="answer-content"></div>
                    <div id="inlineExplanation" class="mt-3 alert alert-info explain-callout d-none">
                      <div class="fw-semibold">Explanation</div>
                      <div id="inlineExplanationText" class="mt-1"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-footer d-flex flex-wrap gap-2 justify-content-between align-items-center">
              <div class="btn-group">
                <button id="prevBtn" class="btn btn-outline-primary">‚Üê Prev</button>
                <button id="revealBtn" class="btn btn-primary">Reveal</button>
                <button id="nextBtn" class="btn btn-outline-primary">Next ‚Üí</button>
              </div>
              <div class="btn-group">
                <button id="unknownBtn" class="btn btn-outline-warning">Mark Unknown</button>
                <button id="knownBtn" class="btn btn-outline-success">Mark Known</button>
                <button id="toggleExplainBtn" class="btn btn-outline-info">Toggle Explanation</button>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-4">
          <div class="card shadow-sm">
            <div class="card-header d-flex justify-content-between align-items-center">
              <span>About this deck</span>
              <span class="badge rounded-pill text-bg-secondary" id="aboutDeckBadge">Overview</span>
            </div>
            <div class="card-body">
              <div id="deckAbout" class="small"></div>
              <hr>
              <div class="small text-muted">
                Need more detail? Click ‚ÄúHelp & Explanations‚Äù for study tips and deck overviews.
              </div>
            </div>
          </div>

          <div class="card shadow-sm mt-4">
            <div class="card-header d-flex justify-content-between align-items-center">
              <span>Progress</span>
              <button id="exportProgressBtn" class="btn btn-sm btn-outline-secondary">Export</button>
            </div>
            <div class="card-body">
              <div class="d-flex justify-content-between">
                <span class="small text-muted">Known</span>
                <span class="small"><span id="knownCount">0</span>/<span id="totalCount">0</span></span>
              </div>
              <div class="progress my-2" role="progressbar" aria-label="Known progress">
                <div id="progressBar" class="progress-bar" style="width: 0%"></div>
              </div>

              <hr>

              <div class="d-flex justify-content-between">
                <span class="small text-muted">Unknown</span>
                <span class="small"><span id="unknownCount">0</span>/<span id="totalCount2">0</span></span>
              </div>
              <div class="progress my-2" role="progressbar" aria-label="Unknown progress">
                <div id="unknownProgressBar" class="progress-bar bg-warning" style="width: 0%"></div>
              </div>

              <hr>

              <div class="d-grid gap-2">
                <button id="studyUnknownBtn" class="btn btn-outline-warning">Study Unknown Only</button>
                <button id="studyAllBtn" class="btn btn-outline-secondary">Study All</button>
              </div>
            </div>
          </div>

          <div class="card shadow-sm mt-4">
            <div class="card-header">Browse (filtered)</div>
            <div class="card-body">
              <ol id="browseList" class="list-group list-group-numbered small"></ol>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer class="container py-4">
      <div class="text-center text-muted small">
        Built with Bootstrap 5. Cards are stored locally; no backend required.
      </div>
    </footer>

    <!-- Help & Explanations Offcanvas -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="helpCanvas" aria-labelledby="helpCanvasLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="helpCanvasLabel">Help & Explanations</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body small">
        <div class="alert alert-primary">
          This app is a fast study tool for an Application/Cloud Support Engineer role. Use Space to reveal, ‚Üê/‚Üí to navigate, and mark cards Known/Unknown to track progress.
        </div>

        <h6 class="mt-3">How to study effectively</h6>
        <ul>
          <li>Do one focused deck at a time (Unix ‚Üí SQL ‚Üí API ‚Üí DataHub).</li>
          <li>Shuffle, then ‚ÄúStudy Unknown Only‚Äù until all cards are Known.</li>
          <li>Explain answers out loud; think how you‚Äôd use it during an incident.</li>
          <li>After finishing a deck, answer ‚ÄúWhen would I use this in production?‚Äù</li>
        </ul>

        <h6 class="mt-4">Deck overviews</h6>
        <div class="list-group mb-3">
          <a href="#" class="list-group-item list-group-item-action" data-deck="Unix">
            <div class="d-flex w-100 justify-content-between">
              <h6 class="mb-1">Unix</h6><small>triage and ops</small>
            </div>
            <p class="mb-1">Fast checks for service health, ports, logs, disk, and JVM. The goal is to confirm impact and isolate faults quickly (network vs app vs infra).</p>
          </a>
          <a href="#" class="list-group-item list-group-item-action" data-deck="SQL">
            <div class="d-flex w-100 justify-content-between">
              <h6 class="mb-1">SQL</h6><small>data validation</small>
            </div>
            <p class="mb-1">Window functions (ROW_NUMBER, LAG) for latest rows and anomalies, MERGE for upserts, regex validation, and dedupe patterns.</p>
          </a>
          <a href="#" class="list-group-item list-group-item-action" data-deck="Git">
            <div class="d-flex w-100 justify-content-between">
              <h6 class="mb-1">Git</h6><small>safe changes</small>
            </div>
            <p class="mb-1">Support-friendly flows: revert vs reset, feature branches, and bisect. Prefer revert on shared branches to avoid rewriting history.</p>
          </a>
          <a href="#" class="list-group-item list-group-item-action" data-deck="Tomcat">
            <div class="d-flex w-100 justify-content-between">
              <h6 class="mb-1">Tomcat</h6><small>JVM/runtime</small>
            </div>
            <p class="mb-1">Connector threads/queues, GC/heap sizing, catalina.out, and thread dumps. Diagnose timeouts, stalls, and pool exhaustion.</p>
          </a>
          <a href="#" class="list-group-item list-group-item-action" data-deck="API">
            <div class="d-flex w-100 justify-content-between">
              <h6 class="mb-1">API</h6><small>REST/SOAP support</small>
            </div>
            <p class="mb-1">Status codes, idempotency, retries, pagination, TLS, and SOAP faults. Think client-side vs server-side causes and safe retry patterns.</p>
          </a>
          <a href="#" class="list-group-item list-group-item-action" data-deck="DataHub - API">
            <div class="d-flex w-100 justify-content-between">
              <h6 class="mb-1">DataHub ‚Äî API</h6><small>jobs & DQ</small>
            </div>
            <p class="mb-1">Trigger jobs, poll runs, fetch DQ results, reprocess quarantine, and verify publish outputs. Endpoints are patterns‚Äîadapt to your environment.</p>
          </a>
          <a href="#" class="list-group-item list-group-item-action" data-deck="DataHub - SQL">
            <div class="d-flex w-100 justify-content-between">
              <h6 class="mb-1">DataHub ‚Äî SQL</h6><small>transforms</small>
            </div>
            <p class="mb-1">Latest snapshots, uniqueness, quarantine summaries, survivorship, anomaly flags, and audit trail queries used during triage and RCA.</p>
          </a>
        </div>

        <h6 class="mt-4">What ‚ÄúToggle Explanation‚Äù does</h6>
        <p>When the answer is visible, ‚ÄúToggle Explanation‚Äù shows an extra line of context for the current card (fallback to deck explanation if missing).</p>

        <h6 class="mt-4">Keyboard shortcuts</h6>
        <ul>
          <li>Space: Reveal/Hide answer</li>
          <li>‚Üê / ‚Üí: Previous / Next card</li>
          <li>k: Mark Known, u: Mark Unknown</li>
          <li>s: Shuffle current deck</li>
        </ul>

        <h6 class="mt-4">Notes on DataHub examples</h6>
        <ul>
          <li>Endpoints are illustrative. Confirm your actual base URL, paths, auth scopes, and object names.</li>
          <li>Prefer idempotent operations and include correlation/run IDs in logs for auditability.</li>
          <li>Quarantine reprocessing should be governed by change control and client approval.</li>
        </ul>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <script>
      // Flashcards data with per-card explanations ("explain")
      window.FLASHCARDS = [
        // Unix
        { id: "unix_ctx_1", category: "Unix", q: "Check current user, hostname, date/time, and uptime quickly.", a: "Use:\\n\\n```bash\\nwhoami; hostname -f; date; uptime\\n```", explain: "Establish baseline context on a host‚Äîuseful when you‚Äôve SSH‚Äôd through jump boxes or are on shared servers." },
        { id: "unix_os_2", category: "Unix", q: "Show OS release and kernel details.", a: "Use:\\n\\n```bash\\ncat /etc/os-release; uname -a\\n```", explain: "Package names, systemd availability, and tuning flags differ by distro/kernel; this guides your next commands." },
        { id: "unix_systemd_3", category: "Unix", q: "Service status and follow last 2 hours of errors for a systemd unit (e.g., datahub).", a: "Use:\\n\\n```bash\\nsystemctl status datahub\\njournalctl -u datahub -S \\\"2 hours ago\\\" -p err..alert\\njournalctl -u datahub -f\\n```", explain: "Confirms whether the app is up and if recent restarts or errors correlate with the incident window." },
        { id: "unix_port_4", category: "Unix", q: "Find which process is listening on TCP port 8080.", a: "Use:\\n\\n```bash\\nsudo lsof -iTCP:8080 -sTCP:LISTEN -n -P\\n# or\\nss -ltnp | grep :8080\\n```", explain: "Validates that Tomcat/JBoss (or the right process) owns the expected port and no port conflicts exist." },
        { id: "unix_logs_5", category: "Unix", q: "Search application logs recursively for 'timeout' or 'connection refused' with context lines.", a: "Use:\\n\\n```bash\\ngrep -RIn --exclude-dir=.git -E \\\"timeout|refused\\\" -C2 /var/log/app 2>/dev/null | less -R\\n```", explain: "Quickly surfaces error clusters and nearby context without opening huge log files." },
        { id: "unix_disk_6", category: "Unix", q: "Check disk usage and find largest log directories.", a: "Use:\\n\\n```bash\\ndf -hT\\ndu -sh /var/log/* | sort -h | tail\\n```", explain: "Disk pressure commonly causes cascading failures (can‚Äôt write logs/temp). Find and clear offenders." },
        { id: "unix_net_7", category: "Unix", q: "Test TCP connectivity to example.com:443 and check DNS resolution.", a: "Use:\\n\\n```bash\\nnc -zv example.com 443\\n# DNS\\ndig example.com +short\\n```", explain: "Differentiates DNS issues from network egress/firewall problems when APIs fail." },
        { id: "unix_tls_8", category: "Unix", q: "Inspect TLS certificate expiry of an HTTPS endpoint.", a: "Use:\\n\\n```bash\\nopenssl s_client -connect api.example.com:443 -servername api.example.com </dev/null \\\\n  | openssl x509 -noout -dates -subject -issuer\\n```", explain: "Catches frequent production incidents: expired certs, wrong SNI, or missing SANs." },
        { id: "unix_jvm_9", category: "Unix", q: "Grab a quick Java thread dump for PID 1234.", a: "Use:\\n\\n```bash\\njstack 1234 > /tmp/tdump.txt\\n# or\\nkill -3 1234   # writes to catalina.out\\n```", explain: "For deadlocks/high CPU, thread dumps show blocked threads and hotspots without restarting." },
        { id: "unix_bg_10", category: "Unix", q: "Run a script in background and keep it alive after logout.", a: "Use:\\n\\n```bash\\nnohup ./run.sh > app.out 2>&1 &\\ndisown\\n```", explain: "Useful for long-running backfills or diagnostics on servers without tmux/screen." },

        // SQL
        { id: "sql_latest_1", category: "SQL", q: "Latest close price per instrument using a window function.", a: "Use:\\n\\n```sql\\nWITH r AS (\\n  SELECT p.*, ROW_NUMBER() OVER (PARTITION BY instrument_id ORDER BY price_date DESC) rn\\n  FROM prices p\\n)\\nSELECT instrument_id, price_date, px_close FROM r WHERE rn = 1;\\n```", explain: "Ensures you‚Äôre referencing the freshest record per instrument‚Äîavoids stale joins." },
        { id: "sql_ma5_2", category: "SQL", q: "Compute 5-day moving average close per instrument.", a: "Use:\\n\\n```sql\\nSELECT instrument_id, price_date,\\n       AVG(px_close) OVER (\\n         PARTITION BY instrument_id\\n         ORDER BY price_date\\n         ROWS BETWEEN 4 PRECEDING AND CURRENT ROW\\n       ) AS ma_5\\nFROM prices;\\n```", explain: "Smooths daily volatility; common in sanity checks and dashboards." },
        { id: "sql_spike_3", category: "SQL", q: "Detect >20% day-over-day price spikes.", a: "Use:\\n\\n```sql\\nSELECT instrument_id, price_date, px_close,\\n       LAG(px_close) OVER (PARTITION BY instrument_id ORDER BY price_date) AS prev_close\\nFROM prices\\n-- Filter rows where ABS(px_close - prev_close) / NULLIF(prev_close,0) > 0.2\\n```", explain: "Flags anomalies that may be feed errors or corporate actions not yet processed." },
        { id: "sql_topk_4", category: "SQL", q: "Top-10 instruments by 5-day notional traded.", a: "Use:\\n\\n```sql\\nSELECT instrument_id, SUM(qty*price) AS notional_5d\\nFROM trades\\nWHERE trade_dt >= CURRENT_DATE - INTERVAL '5 day'\\nGROUP BY instrument_id\\nORDER BY notional_5d DESC\\nLIMIT 10;\\n```", explain: "Helps focus triage on high-impact instruments first." },
        { id: "sql_isin_regex_5", category: "SQL", q: "Validate ISIN format using regex.", a: "Use:\\n\\n```sql\\n-- PostgreSQL\\nSELECT isin FROM instruments WHERE isin ~ '^[A-Z]{2}[A-Z0-9]{9}[0-9]$';\\n-- Oracle: REGEXP_LIKE(isin, '^[A-Z]{2}[A-Z0-9]{9}[0-9]$')\\n```", explain: "Cheap, first-line validation before the Luhn algorithm check." },
        { id: "sql_merge_6", category: "SQL", q: "Upsert (merge) staging into golden copy by (isin, mic).", a: "Use:\\n\\n```sql\\nMERGE INTO instruments t\\nUSING staging s\\nON (t.isin = s.isin AND t.mic = s.mic)\\nWHEN MATCHED THEN UPDATE SET t.ticker = s.ticker, t.currency = s.currency\\nWHEN NOT MATCHED THEN INSERT (isin, mic, ticker, currency)\\nVALUES (s.isin, s.mic, s.ticker, s.currency);\\n```", explain: "Prevents duplicates and keeps golden copy current with minimal locking." },
        { id: "sql_orphan_7", category: "SQL", q: "Find orphan trades with no matching instrument.", a: "Use:\\n\\n```sql\\nSELECT t.trade_id\\nFROM trades t\\nLEFT JOIN instruments i ON i.instrument_id = t.instrument_id\\nWHERE i.instrument_id IS NULL;\\n```", explain: "Reveals referential integrity breaks‚Äîoften due to late reference loads or key mismatches." },
        { id: "sql_dedupe_8", category: "SQL", q: "Deduplicate staging by (isin, mic, eff_date) keeping latest load_ts.", a: "Pattern:\\n\\n```sql\\nDELETE FROM staging s\\nWHERE s.rowid NOT IN (\\n  SELECT MAX(rowid)\\n  FROM staging\\n  GROUP BY isin, mic, eff_date\\n);\\n```", explain: "Ensures stable mastering inputs when vendors resend overlapping data." },

        // Git
        { id: "git_status_1", category: "Git", q: "Show working tree changes and staged changes.", a: "Use:\\n\\n```bash\\ngit status\\ngit diff\\ngit diff --staged\\n```", explain: "Baseline before committing‚Äîavoid accidentally bundling unrelated changes." },
        { id: "git_branch_2", category: "Git", q: "Create a feature branch and push it upstream.", a: "Use:\\n\\n```bash\\ngit checkout -b feat/fix-timeout\\ngit push -u origin feat/fix-timeout\\n```", explain: "Keeps production branches safe while you test fixes." },
        { id: "git_revert_3", category: "Git", q: "Revert a specific commit on main safely (no history rewrite).", a: "Use:\\n\\n```bash\\ngit revert <commit-sha>\\n```", explain: "Best option on shared branches‚Äîproduces a new commit that undoes the bad one." },
        { id: "git_rebase_4", category: "Git", q: "Pull latest with rebase to keep linear history.", a: "Use:\\n\\n```bash\\ngit pull --rebase\\n```", explain: "Avoids noisy merge commits when frequently syncing with origin." },
        { id: "git_reset_5", category: "Git", q: "Hard reset local branch to match remote origin/main.", a: "Use:\\n\\n```bash\\ngit fetch origin\\ngit reset --hard origin/main\\n```", explain: "Blows away local changes‚Äîuse carefully when you need a clean slate." },
        { id: "git_bisect_6", category: "Git", q: "Start a bisect session to find a bad commit.", a: "Use:\\n\\n```bash\\ngit bisect start\\ngit bisect bad\\ngit bisect good <good-sha>\\n```", explain: "Binary search for regressions‚Äîsaves time in large histories." },

        // Tomcat
        { id: "tomcat_dirs_1", category: "Tomcat", q: "Which Tomcat directories matter most in support?", a: "Know: `$CATALINA_BASE/bin conf/lib logs/webapps temp/work`", explain: "You‚Äôll check logs, deploy WARs, and adjust configs in these places." },
        { id: "tomcat_conf_2", category: "Tomcat", q: "Key Tomcat config files to check first.", a: "`conf/server.xml` (connectors/SSL), `conf/web.xml` (defaults), `conf/context.xml` (datasources)", explain: "Connector and datasource misconfigs are common causes of timeouts and pool exhaustion." },
        { id: "tomcat_jvm_3", category: "Tomcat", q: "Set heap and GC options for Tomcat.", a: "Use setenv.sh or service env:\\n\\n```bash\\nJAVA_OPTS=\\\"-Xms2g -Xmx2g -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -Dfile.encoding=UTF-8\\\"\\n```", explain: "Right-size heap and GC to reduce long pauses and OOMs under load." },
        { id: "tomcat_logs_4", category: "Tomcat", q: "Where do logs usually go and how to follow?", a: "`logs/catalina.out` and app logs; follow with:\\n\\n```bash\\ntail -F /var/log/tomcat*/catalina.out\\n```", explain: "Catalina shows server-level events; apps often log separately (Logback/Log4j)." },
        { id: "tomcat_threads_5", category: "Tomcat", q: "Increase HTTP connector threads and queue.", a: "In server.xml `<Connector ... maxThreads=\\\"300\\\" acceptCount=\\\"100\\\" />`", explain: "Prevents request backlog during spikes; balance with downstream capacity." },
        { id: "tomcat_threaddump_6", category: "Tomcat", q: "Generate a thread dump for Tomcat process quickly.", a: "Use:\\n\\n```bash\\njstack <pid> > /tmp/tdump.txt\\n# or\\nkill -3 <pid>\\n```", explain: "Diagnose deadlocks and bottlenecks (e.g., DB pool waits) without restart." },

        // API
        { id: "api_status_1", category: "API", q: "Meaning of 200, 401, 403, 429, 503 in HTTP status codes.", a: "200 OK; 401 Unauthorized (auth missing/expired); 403 Forbidden (insufficient scope); 429 Too Many Requests; 503 Service Unavailable.", explain: "Fast triage: auth vs permission vs throttling vs server-side outage." },
        { id: "api_idempotency_2", category: "API", q: "Which HTTP methods should be idempotent and how to safely retry?", a: "GET/PUT/DELETE should be idempotent. Retry idempotent requests with exponential backoff + jitter on 429/5xx. Use idempotency keys for POST if needed.", explain: "Prevents duplicate side-effects during transient failures and retries." },
        { id: "api_curl_3", category: "API", q: "cURL template to call a token-protected JSON API.", a: "Use:\\n\\n```bash\\ncurl -v -H \\\"Authorization: Bearer $TOKEN\\\" -H \\\"Accept: application/json\\\" \\\\\\n     \\\"https://api.example.com/v1/resources?limit=10\\\"\\n```", explain: "Baseline call to reproduce client issues and capture headers/status." },
        { id: "api_pagination_4", category: "API", q: "Common pagination patterns to recognize.", a: "Offset paging `?page=1&per_page=50` and cursor paging with a `next` token in body or Link headers.", explain: "Incorrect pagination often looks like missing data or duplicates." },
        { id: "api_tls_5", category: "API", q: "Check TLS chain and expiry for an API endpoint.", a: "Use:\\n\\n```bash\\nopenssl s_client -connect api.example.com:443 -servername api.example.com -showcerts </dev/null\\n```", explain: "Validates cert chain, SNI, and expiry on the wire‚Äîcommon root causes." },
        { id: "api_soap_6", category: "API", q: "SOAP basics you need for support.", a: "WSDL defines operations; SOAPAction header; XML Envelope/Body; inspect SOAP Faults and namespaces; check Content-Type: application/soap+xml.", explain: "Namespace or SOAPAction mismatches produce opaque faults; compare to WSDL." },

        // DataHub - API (patterns; adapt to your environment)
        { id: "dh_api_trigger_1", category: "DataHub - API", q: "Trigger a daily mastering job with business date via REST.", a: "Pattern (example endpoint):\\n\\n```bash\\ncurl -sS -X POST \\\"$HUB/api/jobs/reference-mastering-daily:run\\\" \\\\\\n  -H \\\"Authorization: Bearer $TOKEN\\\" \\\\\\n  -H \\\"Content-Type: application/json\\\" \\\\\\n  -d '{\\\"params\\\":{\\\"biz_date\\\":\\\"2025-09-15\\\"}}'\\n```", explain: "Automates re-runs for specific business dates during incidents or backfills." },
        { id: "dh_api_poll_2", category: "DataHub - API", q: "Poll job run status until completion.", a: "Pattern:\\n\\n```bash\\ncurl -sS -H \\\"Authorization: Bearer $TOKEN\\\" \\\"$HUB/api/runs/$RUN_ID\\\"\\n# States: QUEUED | RUNNING | SUCCEEDED | FAILED | CANCELLED\\n```", explain: "Drive runbooks programmatically and stop early when a run fails." },
        { id: "dh_api_rules_3", category: "DataHub - API", q: "Fetch data-quality results (rejects by rule) for a run.", a: "Pattern (example):\\n\\n```bash\\ncurl -sS -H \\\"Authorization: Bearer $TOKEN\\\" \\\\\\n  \\\"$HUB/api/runs/$RUN_ID/dq/results?summary=true\\\"\\n```", explain: "Identifies which rule caused mass rejects (e.g., ISIN_LUHN spike)." },
        { id: "dh_api_reprocess_4", category: "DataHub - API", q: "Reprocess quarantined records after a mapping fix.", a: "Pattern:\\n\\n```bash\\ncurl -sS -X POST -H \\\"Authorization: Bearer $TOKEN\\\" \\\\\\n  -H \\\"Content-Type: application/json\\\" \\\\\\n  -d '{\\\"rule\\\":\\\"ISIN_LUHN\\\",\\\"action\\\":\\\"reprocess\\\",\\\"since\\\":\\\"2025-09-15\\\"}' \\\\\\n  \\\"$HUB/api/quarantine:reprocess\\\"\\n```", explain: "Use with care and audit‚Äîensures fixes propagate without full reingest." },
        { id: "dh_api_publish_5", category: "DataHub - API", q: "Verify publish step outputs and distribution status.", a: "Pattern:\\n\\n```bash\\ncurl -sS -H \\\"Authorization: Bearer $TOKEN\\\" \\\\\\n  \\\"$HUB/api/runs/$RUN_ID/outputs\\\"\\n# Check zero-output publishes and downstream delivery status\\n```", explain: "Confirms whether golden copy actually produced and distributed records." },
        { id: "dh_api_auth_6", category: "DataHub - API", q: "Common auth pitfalls when calling DataHub APIs.", a: "Expired token, missing scopes, wrong audience; clock skew on JWT; environment/base URL mix-ups; proxy/egress blocked.", explain: "Most API incidents are auth/network; check expiry and scopes first." },
        { id: "dh_api_schema_7", category: "DataHub - API", q: "Detect vendor schema drift before bulk ingest.", a: "Pattern:\\n\\n```bash\\ncurl -sS -H \\\"Authorization: Bearer $TOKEN\\\" \\\\\\n  \\\"$HUB/api/schemas/vendors/bbg/sec:compare?date=2025-09-15\\\"\\n```", explain: "Catches header/column changes early to avoid mass reject events." },
        { id: "dh_api_lineage_8", category: "DataHub - API", q: "Get lineage for a published instrument record.", a: "Pattern:\\n\\n```bash\\ncurl -sS -H \\\"Authorization: Bearer $TOKEN\\\" \\\\\\n  \\\"$HUB/api/lineage/instruments?isin=US0378331005&mic=XNAS\\\"\\n```", explain: "Trace back to the vendor record and steps‚Äîuseful for RCA with clients." },

        // DataHub - SQL
        { id: "dh_sql_latest_1", category: "DataHub - SQL", q: "Compute latest price per instrument in a transform step.", a: "Use:\\n\\n```sql\\nWITH r AS (\\n  SELECT p.*, ROW_NUMBER() OVER (PARTITION BY instrument_id ORDER BY price_date DESC) rn\\n  FROM prices p\\n)\\nINSERT INTO analytics.latest_prices (instrument_id, price_date, px_close)\\nSELECT instrument_id, price_date, px_close FROM r WHERE rn = 1;\\n```", explain: "Materializes a latest snapshot table for fast downstream joins." },
        { id: "dh_sql_uniq_2", category: "DataHub - SQL", q: "Enforce uniqueness of (isin, mic) during mastering.", a: "Approach:\\n\\n- Add a uniqueness rule in DQ to reject duplicates.\\n- Alternatively enforce a unique index on golden copy table.\\n\\n```sql\\nCREATE UNIQUE INDEX IF NOT EXISTS ux_instruments_isin_mic ON instruments(isin, mic);\\n```", explain: "Prevents duplicate identities that would break downstream systems." },
        { id: "dh_sql_quarantine_3", category: "DataHub - SQL", q: "Summarize quarantine rejects by rule and source for a business date.", a: "Use:\\n\\n```sql\\nSELECT biz_date, rule_id, source, COUNT(*) AS rejects\\nFROM dq_quarantine\\nWHERE biz_date = DATE '2025-09-15'\\nGROUP BY biz_date, rule_id, source\\nORDER BY rejects DESC;\\n```", explain: "Prioritizes fixes by impact and identifies problematic vendors." },
        { id: "dh_sql_merge_4", category: "DataHub - SQL", q: "Merge staging into instruments (golden copy) with survivorship preference.", a: "Use:\\n\\n```sql\\nMERGE INTO instruments t\\nUSING (\\n  SELECT s.*,\\n         ROW_NUMBER() OVER (PARTITION BY isin, mic ORDER BY eff_date DESC, source = 'BBG' DESC) as pref\\n  FROM staging_instruments s\\n) p\\nON (t.isin = p.isin AND t.mic = p.mic)\\nWHEN MATCHED AND p.pref = 1 THEN UPDATE SET\\n  ticker = p.ticker, currency = p.currency\\nWHEN NOT MATCHED AND p.pref = 1 THEN INSERT (isin, mic, ticker, currency)\\nVALUES (p.isin, p.mic, p.ticker, p.currency);\\n```", explain: "Implements a simple survivorship policy (latest-effective, preferred source) directly in SQL." },
        { id: "dh_sql_spike_5", category: "DataHub - SQL", q: "Flag price spikes > 20% DoD and route to exceptions.", a: "Use:\\n\\n```sql\\nWITH lagged AS (\\n  SELECT instrument_id, price_date, px_close,\\n         LAG(px_close) OVER (PARTITION BY instrument_id ORDER BY price_date) AS prev_close\\n  FROM prices\\n)\\nINSERT INTO price_exceptions (instrument_id, price_date, reason)\\nSELECT instrument_id, price_date, 'SPIKE_20PC'\\nFROM lagged\\nWHERE prev_close IS NOT NULL AND ABS(px_close - prev_close) / NULLIF(prev_close,0) > 0.2;\\n```", explain: "Separates suspect points to keep main pipelines flowing while you investigate." },
        { id: "dh_sql_isin_6", category: "DataHub - SQL", q: "ISIN validation approach in SQL.", a: "Use regex for format and a UDF for Luhn. Example:\\n\\n```sql\\nSELECT * FROM instruments WHERE isin ~ '^[A-Z]{2}[A-Z0-9]{9}[0-9]$' AND luhn_isin(isin);\\n```", explain: "Two-step validation: cheap regex first, then proper check digit to minimize false accepts." },
        { id: "dh_sql_audit_7", category: "DataHub - SQL", q: "Query run audit trail for record counts by step.", a: "Use:\\n\\n```sql\\nSELECT step, rows_in, rows_out, errors\\nFROM run_audit\\nWHERE run_id = :run_id\\nORDER BY sequence;\\n```", explain: "Shows exactly where rows dropped or errors spiked‚Äîpinpoints failing step." },
        { id: "dh_sql_vendor_consensus_8", category: "DataHub - SQL", q: "Detect pricing anomalies via vendor consensus before mastering.", a: "Use:\\n\\n```sql\\nSELECT key, AVG(price) AS avg_px, STDDEV_POP(price) AS stdev, COUNT(*) vendors\\nFROM vendor_prices\\nWHERE biz_date = DATE '2025-09-15'\\nGROUP BY key\\nHAVING COUNT(*) >= 2 AND STDDEV_POP(price) > 5 * NULLIF(AVG(price),0) / 100.0;\\n```", explain: "Consensus checks surface outliers early; prevents bad points entering golden copy." }
      ];
    </script>

    <script>
      // Flashcards App Logic (single page) with per-card explanations
      (() => {
        const state = {
          allCards: window.FLASHCARDS || [],
          deckKeys: [],
          filtered: [],
          currentIndex: 0,
          showAnswer: false,
          studyUnknownOnly: false,
          deckKey: null,
          searchTerm: "",
          showInlineExplain: false
        };

        const deckDescriptions = {
          "Unix": "Triage fundamentals for Linux systems: verify service health, inspect logs, check ports/connectivity, diagnose disk/CPU/IO pressure, and capture JVM diagnostics. These commands help you decide whether the problem is infra, network, or application.",
          "SQL": "Data validation and investigation patterns: window functions for latest records and anomalies, MERGE for upserts, regex-based validations, and deduplication to stabilize staging before mastering.",
          "Git": "Safe collaboration workflows: quickly inspect changes, branch and push, revert bad commits without rewriting history, and use bisect to pinpoint regressions.",
          "Tomcat": "Operate Java web apps: tune connector thread pools, set heap/GC options, locate and follow catalina.out, and capture thread dumps during incidents.",
          "API": "Support REST/SOAP integrations: interpret status codes, design safe retries with idempotency, paginate correctly, and debug TLS and SOAP faults using curl and OpenSSL.",
          "DataHub - API": "Operate and support DataHub-like platforms via API: trigger jobs with parameters, poll run states, fetch data-quality summaries, reprocess quarantines, and verify publish outputs. Endpoints are patterns‚Äîadjust to your environment.",
          "DataHub - SQL": "Implement transforms and investigations: compute latest snapshots, enforce uniqueness, summarize quarantine rejects, apply survivorship, flag price spikes, and query audit trails for RCA."
        };

        const deckFallbackExplain = {
          "Unix": "Why: Quickly determine if the issue is service, OS, network, or JVM. Use these first to narrow the blast radius before deep dives.",
          "SQL": "Why: Validates data freshness and quality. Window functions are essential for latest rows and day-over-day comparisons.",
          "Git": "Why: Keep main stable and audit-friendly. Prefer revert on shared branches; use bisect to locate problematic commits fast.",
          "Tomcat": "Why: Timeouts and stalls often come from exhausted thread/DB pools or GC pauses. Tune connectors and check GC/thread dumps.",
          "API": "Why: Many client issues are auth, pagination, or retry-related. Understand idempotency and rate limits to avoid data duplication.",
          "DataHub - API": "Why: Most incidents involve a failing step or zero-output publish. Use run status, DQ summaries, and outputs to guide remediation.",
          "DataHub - SQL": "Why: Supports mastering and RCA. Proves whether anomalies are upstream (vendor) or internal (rules/survivorship)."
        };

        const els = {
          deckSelect: document.getElementById("deckSelect"),
          searchInput: document.getElementById("searchInput"),
          clearSearchBtn: document.getElementById("clearSearchBtn"),
          badgeDeck: document.getElementById("badgeDeck"),
          badgeIndex: document.getElementById("badgeIndex"),
          question: document.getElementById("question"),
          answer: document.getElementById("answer"),
          revealBtn: document.getElementById("revealBtn"),
          prevBtn: document.getElementById("prevBtn"),
          nextBtn: document.getElementById("nextBtn"),
          knownBtn: document.getElementById("knownBtn"),
          unknownBtn: document.getElementById("unknownBtn"),
          shuffleBtn: document.getElementById("shuffleBtn"),
          resetProgressBtn: document.getElementById("resetProgressBtn"),
          progressBar: document.getElementById("progressBar"),
          unknownProgressBar: document.getElementById("unknownProgressBar"),
          knownCount: document.getElementById("knownCount"),
          unknownCount: document.getElementById("unknownCount"),
          totalCount: document.getElementById("totalCount"),
          totalCount2: document.getElementById("totalCount2"),
          browseList: document.getElementById("browseList"),
          studyUnknownBtn: document.getElementById("studyUnknownBtn"),
          studyAllBtn: document.getElementById("studyAllBtn"),
          flipper: document.getElementById("flipper"),
          exportProgressBtn: document.getElementById("exportProgressBtn"),
          darkModeToggle: document.getElementById("darkModeToggle"),
          deckAbout: document.getElementById("deckAbout"),
          aboutDeckBadge: document.getElementById("aboutDeckBadge"),
          inlineExplanation: document.getElementById("inlineExplanation"),
          inlineExplanationText: document.getElementById("inlineExplanationText"),
          toggleExplainBtn: document.getElementById("toggleExplainBtn")
        };

        // Theme
        const THEME_KEY = "flashcards_theme";
        const savedTheme = localStorage.getItem(THEME_KEY) || "auto";
        if (savedTheme === "dark") {
          document.documentElement.setAttribute("data-bs-theme", "dark");
          els.darkModeToggle.checked = true;
        }
        els.darkModeToggle.addEventListener("change", () => {
          const dark = els.darkModeToggle.checked;
          document.documentElement.setAttribute("data-bs-theme", dark ? "dark" : "light");
          localStorage.setItem(THEME_KEY, dark ? "dark" : "light");
        });

        // Progress store
        const knownKey = (id) => `known:${id}`;
        const isKnown = (id) => localStorage.getItem(knownKey(id)) === "1";
        const setKnown = (id, val) => localStorage.setItem(knownKey(id), val ? "1" : "0");
        const resetProgress = () => {
          state.allCards.forEach(c => localStorage.removeItem(knownKey(c.id)));
          updateStats();
        };

        // Decks
        function initDecks() {
          const keys = [...new Set(state.allCards.map(c => c.category))].sort();
          state.deckKeys = keys;
          els.deckSelect.innerHTML = "";
          keys.forEach(k => {
            const opt = document.createElement("option");
            opt.value = k;
            opt.textContent = k;
            els.deckSelect.appendChild(opt);
          });
          state.deckKey = keys[0] || null;
          els.deckSelect.value = state.deckKey;
          updateDeckAbout();
        }

        function updateDeckAbout() {
          const desc = deckDescriptions[state.deckKey] || "Select a deck to see its overview.";
          els.deckAbout.textContent = desc;
          els.aboutDeckBadge.textContent = state.deckKey || "Overview";
        }

        function filterCards() {
          const term = state.searchTerm.trim().toLowerCase();
          const cards = state.allCards.filter(c => c.category === state.deckKey);
          const filtered = cards.filter(c => {
            if (state.studyUnknownOnly && isKnown(c.id)) return false;
            if (!term) return true;
            return c.q.toLowerCase().includes(term) || c.a.toLowerCase().includes(term) || (c.explain || "").toLowerCase().includes(term);
          });
          state.filtered = filtered;
          state.currentIndex = 0;
          state.showAnswer = false;
          render();
        }

        function render() {
          els.badgeDeck.textContent = state.deckKey || "Deck";
          const total = state.filtered.length;
          if (total === 0) {
            els.badgeIndex.textContent = "0 / 0";
            els.question.textContent = "No cards match your filter.";
            els.answer.innerHTML = "";
            els.flipper.classList.remove("flipped");
            els.inlineExplanation.classList.add("d-none");
            updateStats();
            renderBrowse();
            return;
          }
          const idx = Math.min(state.currentIndex, total - 1);
          const card = state.filtered[idx];
          els.badgeIndex.textContent = `${idx + 1} / ${total}`;
          els.question.textContent = card.q;

          const html = marked.parse(card.a || "");
          els.answer.innerHTML = html;
          els.answer.querySelectorAll("pre code").forEach(block => {
            try { hljs.highlightElement(block); } catch {}
          });

          if (state.showAnswer) {
            els.flipper.classList.add("flipped");
            els.revealBtn.textContent = "Hide";
            // Per-card explanation with deck fallback
            if (state.showInlineExplain) {
              els.inlineExplanation.classList.remove("d-none");
              const cardExplain = card.explain && card.explain.trim().length ? card.explain : null;
              els.inlineExplanationText.textContent = cardExplain || deckFallbackExplain[state.deckKey] || "No extra explanation available.";
            } else {
              els.inlineExplanation.classList.add("d-none");
            }
          } else {
            els.flipper.classList.remove("flipped");
            els.revealBtn.textContent = "Reveal";
            els.inlineExplanation.classList.add("d-none");
          }

          updateStats();
          renderBrowse();
          updateDeckAbout();
        }

        function renderBrowse() {
          els.browseList.innerHTML = "";
          state.filtered.forEach((c, i) => {
            const li = document.createElement("li");
            li.className = "list-group-item d-flex justify-content-between align-items-start";
            const textDiv = document.createElement("div");
            textDiv.className = "ms-2 me-auto";
            textDiv.innerHTML = `<div class="fw-semibold">${c.q}</div>`;
            li.appendChild(textDiv);

            const badge = document.createElement("span");
            badge.className = `badge rounded-pill ${isKnown(c.id) ? "text-bg-success" : "text-bg-secondary"}`;
            badge.textContent = isKnown(c.id) ? "Known" : "New";
            li.appendChild(badge);

            li.addEventListener("click", () => {
              state.currentIndex = i;
              state.showAnswer = false;
              render();
              window.scrollTo({ top: 0, behavior: "smooth" });
            });
            els.browseList.appendChild(li);
          });
        }

        function updateStats() {
          const cards = state.allCards.filter(c => c.category === state.deckKey);
          const total = cards.length;
          const known = cards.filter(c => isKnown(c.id)).length;
          const unknown = total - known;
          els.knownCount.textContent = known;
          els.unknownCount.textContent = unknown;
          els.totalCount.textContent = total;
          els.totalCount2.textContent = total;
          const pctKnown = total ? Math.round((known / total) * 100) : 0;
          const pctUnknown = total ? Math.round((unknown / total) * 100) : 0;
          els.progressBar.style.width = `${pctKnown}%`;
          els.progressBar.textContent = `${pctKnown}%`;
          els.unknownProgressBar.style.width = `${pctUnknown}%`;
          els.unknownProgressBar.textContent = `${pctUnknown}%`;
        }

        function next() {
          if (state.filtered.length === 0) return;
          state.currentIndex = (state.currentIndex + 1) % state.filtered.length;
          state.showAnswer = false;
          render();
        }
        function prev() {
          if (state.filtered.length === 0) return;
          state.currentIndex = (state.currentIndex - 1 + state.filtered.length) % state.filtered.length;
          state.showAnswer = false;
          render();
        }
        function revealToggle() {
          state.showAnswer = !state.showAnswer;
          render();
        }
        function shuffle() {
          for (let i = state.filtered.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [state.filtered[i], state.filtered[j]] = [state.filtered[j], state.filtered[i]];
          }
          state.currentIndex = 0;
          state.showAnswer = false;
          render();
        }
        function markKnown(val) {
          const card = state.filtered[state.currentIndex];
          if (!card) return;
          setKnown(card.id, !!val);
          updateStats();
          next();
        }
        function exportProgress() {
          const progress = {};
          state.allCards.forEach(c => { if (isKnown(c.id)) progress[c.id] = 1; });
          const blob = new Blob([JSON.stringify(progress, null, 2)], { type: "application/json" });
          const a = document.createElement("a");
          a.href = URL.createObjectURL(blob);
          a.download = "flashcards-progress.json";
          a.click();
        }

        // Events
        document.getElementById("deckSelect").addEventListener("change", () => {
          state.deckKey = els.deckSelect.value;
          state.studyUnknownOnly = false;
          state.searchTerm = "";
          els.searchInput.value = "";
          filterCards();
        });
        els.searchInput.addEventListener("input", (e) => {
          state.searchTerm = e.target.value;
          filterCards();
        });
        document.getElementById("clearSearchBtn").addEventListener("click", () => {
          els.searchInput.value = "";
          state.searchTerm = "";
          filterCards();
        });
        document.getElementById("prevBtn").addEventListener("click", prev);
        document.getElementById("nextBtn").addEventListener("click", next);
        document.getElementById("revealBtn").addEventListener("click", revealToggle);
        document.getElementById("shuffleBtn").addEventListener("click", shuffle);
        document.getElementById("resetProgressBtn").addEventListener("click", () => {
          if (confirm("Reset known/unknown progress for all decks?")) {
            resetProgress();
            render();
          }
        });
        document.getElementById("knownBtn").addEventListener("click", () => markKnown(true));
        document.getElementById("unknownBtn").addEventListener("click", () => markKnown(false));
        document.getElementById("studyUnknownBtn").addEventListener("click", () => {
          state.studyUnknownOnly = true;
          filterCards();
        });
        document.getElementById("studyAllBtn").addEventListener("click", () => {
          state.studyUnknownOnly = false;
          filterCards();
        });
        document.getElementById("exportProgressBtn").addEventListener("click", exportProgress);
        document.getElementById("toggleExplainBtn").addEventListener("click", () => {
          state.showInlineExplain = !state.showInlineExplain;
          render();
        });

        // Offcanvas deck links
        document.getElementById("helpCanvas").addEventListener("click", (e) => {
          const target = e.target.closest("[data-deck]");
          if (target) {
            e.preventDefault();
            const deck = target.getAttribute("data-deck");
            if (state.deckKeys.includes(deck)) {
              state.deckKey = deck;
              els.deckSelect.value = deck;
              state.studyUnknownOnly = false;
              state.searchTerm = "";
              els.searchInput.value = "";
              filterCards();
              const canvasEl = document.getElementById("helpCanvas");
              const offcanvas = bootstrap.Offcanvas.getInstance(canvasEl);
              if (offcanvas) offcanvas.hide();
              window.scrollTo({ top: 0, behavior: "smooth" });
            }
          }
        });

        // Keyboard shortcuts
        window.addEventListener("keydown", (e) => {
          if (e.target.tagName === "INPUT" || e.target.tagName === "TEXTAREA") return;
          if (e.code === "Space") { e.preventDefault(); revealToggle(); }
          else if (e.code === "ArrowRight") next();
          else if (e.code === "ArrowLeft") prev();
          else if (e.key === "k") markKnown(true);
          else if (e.key === "u") markKnown(false);
          else if (e.key === "s") shuffle();
        });

        // Init
        initDecks();
        filterCards();
      })();
    </script>
  </body>
</html>